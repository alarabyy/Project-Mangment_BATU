/* Import Animate.css for awesome animations */
@import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');

.chats-container {
  display: flex;
  flex-direction: column;
  height: calc(100vh - var(--navbar-height));
  max-width: 850px; /* Slightly wider container */
  margin: 0 auto;
  padding: 1.5rem;
  background-color: var(--bg-color);
  color: var(--text-color);
  overflow: hidden; /* Hide overflow from animations */
}

.chats-header {
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  position: sticky; /* Make header sticky */
  top: 0;
  z-index: 10;
  background-color: var(--bg-color); /* Ensure header background matches body */
  padding-top: 0.5rem; /* Small padding for sticky header */
}

.chats-title {
  font-size: 2.2rem; /* Larger title */
  font-weight: var(--font-weight-black); /* Bolder title */
  color: var(--primary-accent); /* Green title */
  text-align: center;
  flex-grow: 1; /* Center the title by taking available space */
  margin-left: -2rem; /* Adjust for button space */
}

.menu-button, .new-chat-button {
  width: 50px;
  height: 50px;
  border-radius: 50%; /* Circular buttons */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  flex-shrink: 0; /* Prevent shrinking */
}

.menu-button {
    background-color: var(--surface-color);
    color: var(--text-color);
    border-color: var(--border-color);
}
.menu-button:hover {
    background-color: var(--border-color);
}

.new-chat-button {
    background-color: var(--primary-accent);
    color: var(--bg-color);
}
.new-chat-button:hover {
    background-color: var(--primary-accent-hover);
    transform: rotate(90deg); /* Spin effect on hover */
}


.search-bar {
  position: relative;
  flex-grow: 2; /* Allow search bar to grow more */
}

.search-input {
  padding-left: 3rem; /* More space for the icon and a potential larger icon */
  border-radius: var(--border-radius-pill);
  background-color: var(--surface-color);
  border-color: var(--border-color);
  transition: all var(--transition-speed-fast) ease;
}

.search-input:focus {
  border-color: var(--primary-accent);
  box-shadow: 0 0 0 4px var(--primary-accent-translucent); /* Larger glow */
  background-color: var(--bg-color); /* Darker on focus */
}

.search-icon {
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--subtle-text-color);
  font-size: 1.2rem; /* Larger icon */
  transition: color var(--transition-speed-fast) ease;
}
.search-input:focus + .search-icon {
    color: var(--primary-accent); /* Green icon on focus */
}

.chat-list {
  flex-grow: 1;
  overflow-y: auto;
  padding-right: 8px; /* More space for scrollbar */
  padding-bottom: 1rem; /* Space at the bottom of the list */
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Custom scrollbar for chat list */
.chat-list::-webkit-scrollbar { width: 10px; }
.chat-list::-webkit-scrollbar-track { background: var(--surface-color); border-radius: var(--border-radius-pill); }
.chat-list::-webkit-scrollbar-thumb {
  background-color: var(--primary-accent);
  border-radius: var(--border-radius-pill);
  border: 2px solid var(--surface-color);
}
.chat-list::-webkit-scrollbar-thumb:hover { background-color: var(--primary-accent-hover); }


.no-chats-message {
  text-align: center;
  color: var(--subtle-text-color);
  margin-top: 4rem; /* More margin */
  font-size: 1.2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}
.no-chats-message i {
    color: var(--border-color); /* Grey icon */
    font-size: 5rem; /* Larger icon */
}


.chat-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.25rem;
  margin-bottom: 0.75rem;
  cursor: pointer;
  background-color: var(--surface-color);
  border: 1px solid var(--border-color-translucent);
  border-radius: var(--border-radius-large);
  transition: all var(--transition-speed-normal) var(--easing-curve-elegant); /* Smoother transition */
  box-shadow: var(--box-shadow-sm);
  position: relative; /* For actions on hover and pinned icon */
  overflow: hidden; /* Hide overflow content from action buttons initially */
}

.chat-item:hover {
  background-color: rgba(var(--primary-accent-rgb), 0.08); /* More prominent hover effect */
  border-color: var(--primary-accent); /* Green border on hover */
  transform: translateY(-5px) scale(1.01); /* Subtle lift and slightly larger */
  box-shadow: 0 8px 20px var(--shadow-color-accent); /* Enhanced shadow */
}

.chat-item-pinned {
    background-color: rgba(var(--primary-accent-rgb), 0.15); /* Distinct background for pinned */
    border-color: var(--primary-accent);
    padding-right: 3rem; /* Space for the pinned icon */
}
.chat-item-pinned:hover {
    background-color: rgba(var(--primary-accent-rgb), 0.2);
}


.chat-avatar {
  flex-shrink: 0;
  position: relative; /* For online indicator */
}

.chat-avatar img {
  width: 65px; /* Slightly larger avatars */
  height: 65px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--primary-accent); /* Thicker green border */
  transition: all var(--transition-speed-fast) ease;
}
.chat-item:hover .chat-avatar img {
    transform: scale(1.05); /* Grow avatar on chat item hover */
    border-color: var(--primary-accent-hover);
}

.online-indicator {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 15px;
    height: 15px;
    background-color: #39FF14; /* Neon Green for online */
    border-radius: 50%;
    border: 3px solid var(--surface-color); /* Border matches card background */
    box-shadow: 0 0 0 1px var(--primary-accent); /* Green glow */
    animation: pulse 1.5s infinite ease-out; /* Pulsing animation */
}
/* Animation for online indicator */
@keyframes pulse {
    0% { transform: scale(0.8); opacity: 0.8; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(0.8); opacity: 0.8; }
}


.chat-info {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.chat-name-time {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.25rem;
}

.chat-name {
  font-size: 1.25rem; /* Larger name */
  font-weight: var(--font-weight-bold); /* Bolder name */
  color: var(--text-color);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.chat-time {
  font-size: 0.9rem; /* Slightly larger time */
  color: var(--subtle-text-color);
  flex-shrink: 0;
  margin-left: 0.75rem; /* More space */
}

.chat-last-message {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem; /* More space */
}

.chat-last-message p {
  font-size: 1rem; /* Base font size */
  color: var(--subtle-text-color);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-grow: 1;
}

.unread-count {
  background-color: var(--primary-accent);
  color: var(--bg-color);
  font-size: 0.85rem; /* Slightly larger count */
  font-weight: var(--font-weight-extrabold); /* Extra bold */
  border-radius: var(--border-radius-pill);
  padding: 0.25rem 0.7rem; /* More padding */
  flex-shrink: 0;
  animation: bounceIn 0.6s var(--easing-curve-bounce) both; /* Bouncy animation on appearance */
}

.chat-actions-hover {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 0; /* Initially hidden */
    background-color: rgba(var(--primary-accent-rgb), 0.1); /* Subtle green background */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 0.25rem;
    overflow: hidden;
    transition: width var(--transition-speed-fast) ease-out, background-color var(--transition-speed-fast) ease-out;
    border-left: 1px solid var(--border-color-translucent);
    border-top-right-radius: var(--border-radius-large);
    border-bottom-right-radius: var(--border-radius-large);
}
.chat-item:hover .chat-actions-hover {
    width: 50px; /* Expand on hover */
}
/* No longer forcing width on pinned, rely on hover */

.chat-actions-hover .btn-icon {
    background: none;
    border: none;
    color: var(--subtle-text-color);
    font-size: 1rem;
    padding: 0.5rem;
    cursor: pointer;
    transition: color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 40px; /* Consistent size */
    height: 40px;
    border-radius: 50%; /* Circular buttons */
}
.chat-actions-hover .btn-icon:hover {
    color: var(--primary-accent);
    transform: scale(1.1); /* Pop effect */
    background-color: rgba(var(--primary-accent-rgb), 0.1);
}
.chat-actions-hover .btn-icon:active {
    transform: scale(0.9);
}
.chat-actions-hover .btn-danger-icon { /* Specific style for delete button */
    color: var(--error-color);
}
.chat-actions-hover .btn-danger-icon:hover {
    color: darken(var(--error-color), 10%);
    background-color: rgba(var(--error-color-rgb), 0.1);
}

.pinned-active-icon { /* Style for the pin icon when active (pinned) */
    color: var(--primary-accent);
    transform: rotate(45deg); /* Slight rotation when active */
}

.pinned-icon { /* For the static pinned icon on the chat item */
    position: absolute;
    top: 10px;
    right: 10px;
    color: var(--primary-accent); /* Green for pinned icon */
    font-size: 1rem;
    transform: rotate(45deg); /* Slight rotation */
}


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
  .chats-container {
    padding: 1rem;
  }

  .chats-header {
    flex-wrap: wrap; /* Allow header items to wrap */
    justify-content: center;
    padding-bottom: 1rem;
    margin-bottom: 1rem;
  }

  .chats-title {
    font-size: 1.8rem;
    flex-basis: 100%; /* Take full width */
    text-align: center;
    margin-left: 0;
  }

  .menu-button, .new-chat-button {
    width: 45px;
    height: 45px;
    font-size: 1.2rem;
  }

  .search-bar {
    flex-basis: 100%; /* Take full width */
    order: 3; /* Move search bar to the bottom row of header */
  }

  .search-input {
    padding-left: 2.5rem;
  }

  .search-icon {
    font-size: 1.1rem;
    left: 0.8rem;
  }

  .chat-item {
    padding: 0.8rem 1rem;
    gap: 0.8rem;
    margin-bottom: 0.6rem;
  }

  .chat-item:hover {
    transform: translateY(-3px) scale(1.005);
    box-shadow: 0 6px 15px var(--shadow-color-accent);
  }

  .chat-avatar img {
    width: 55px;
    height: 55px;
    border-width: 2px;
  }
   .online-indicator {
    width: 12px;
    height: 12px;
    border-width: 2px;
  }

  .chat-name {
    font-size: 1.1rem;
  }

  .chat-time {
    font-size: 0.85rem;
  }

  .chat-last-message p {
    font-size: 0.95rem;
  }

  .unread-count {
    font-size: 0.8rem;
    padding: 0.18rem 0.6rem;
  }

  .chat-actions-hover {
    width: 0; /* Keep hidden on small screens by default */
    background-color: transparent; /* No background on small screens */
  }
  .chat-item:hover .chat-actions-hover {
    width: 0; /* Explicitly keep hidden on hover for mobile */
  }
  .pinned-icon {
    font-size: 0.9rem;
    top: 8px;
    right: 8px;
  }
}

@media (max-width: 480px) {
  .chats-container {
    padding: 0.8rem;
  }

  .chats-title {
    font-size: 1.6rem;
  }

  .menu-button, .new-chat-button {
    width: 40px;
    height: 40px;
    font-size: 1.1rem;
  }

  .search-input {
    padding-left: 2.2rem;
    font-size: 0.9rem;
  }

  .search-icon {
    font-size: 1rem;
    left: 0.7rem;
  }

  .chat-item {
    padding: 0.7rem 0.8rem;
    gap: 0.7rem;
    margin-bottom: 0.5rem;
  }
  .chat-item:hover {
    transform: translateY(-2px) scale(1.005);
    box-shadow: 0 4px 10px var(--shadow-color-accent);
  }

  .chat-avatar img {
    width: 48px;
    height: 48px;
    border-width: 2px;
  }
   .online-indicator {
    width: 10px;
    height: 10px;
    border-width: 2px;
  }

  .chat-name {
    font-size: 1rem;
  }

  .chat-time {
    font-size: 0.8rem;
  }

  .chat-last-message p {
    font-size: 0.9rem;
  }

  .unread-count {
    font-size: 0.75rem;
    padding: 0.15rem 0.5rem;
  }
}
