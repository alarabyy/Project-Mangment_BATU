<div class="auth-form-container">
  <div class="form-header">
    <div class="header-icon-wrapper">
      <i class="fas fa-user-plus header-icon"></i>
    </div>
    <h2>Create Your Account</h2>
    <p>Join our community by signing up.</p>
  </div>

  <form [formGroup]="signupForm" (ngSubmit)="submitSignup()" class="auth-form" novalidate>

    <!-- Name Fields -->
    <div class="form-row three-columns">
      <div class="input-field-wrapper">
        <input id="firstName" type="text" class="form-control" placeholder=" " formControlName="firstName"
          [class.is-invalid]="f['firstName'].invalid && (f['firstName'].dirty || f['firstName'].touched)" />
        <label for="firstName">First Name</label>
        <div *ngIf="f['firstName'].invalid && (f['firstName'].dirty || f['firstName'].touched)" class="input-hint">
          <div *ngIf="f['firstName'].errors?.['required']">First Name is required.</div>
          <div *ngIf="f['firstName'].errors?.['minlength']">First Name must be at least 2 characters.</div>
        </div>
      </div>
      <div class="input-field-wrapper">
        <input id="middleName" type="text" class="form-control" placeholder=" " formControlName="middleName" />
        <label for="middleName">Middle Name (Optional)</label>
      </div>
      <div class="input-field-wrapper">
        <input id="lastName" type="text" class="form-control" placeholder=" " formControlName="lastName"
          [class.is-invalid]="f['lastName'].invalid && (f['lastName'].dirty || f['lastName'].touched)" />
        <label for="lastName">Last Name</label>
        <div *ngIf="f['lastName'].invalid && (f['lastName'].dirty || f['lastName'].touched)" class="input-hint">
          <div *ngIf="f['lastName'].errors?.['required']">Last Name is required.</div>
          <div *ngIf="f['lastName'].errors?.['minlength']">Last Name must be at least 2 characters.</div>
        </div>
      </div>
    </div>

    <!-- Email -->
    <div class="input-field-wrapper">
      <input id="email" type="email" class="form-control" placeholder=" " formControlName="email"
        [class.is-invalid]="f['email'].invalid && (f['email'].dirty || f['email'].touched)" />
      <label for="email">University Email</label>
      <div *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)" class="input-hint">
        <div *ngIf="f['email'].errors?.['required']">Email is required.</div>
        <div *ngIf="f['email'].errors?.['email']">Please enter a valid email address.</div>
      </div>
    </div>

    <!-- Password -->
    <div class="input-field-wrapper">
      <input id="password" [type]="showPassword ? 'text' : 'password'" class="form-control" placeholder=" "
        formControlName="password"
        [class.is-invalid]="f['password'].invalid && (f['password'].dirty || f['password'].touched)" />
      <label for="password">Password</label>
      <div *ngIf="f['password'].invalid && (f['password'].dirty || f['password'].touched)" class="input-hint">
        <div *ngIf="f['password'].errors?.['required']">Password is required.</div>
        <div *ngIf="f['password'].errors?.['pattern']">Password must be at least 8 characters long and contain at
          least one letter and one number.</div>
      </div>
    </div>

    <!-- Toggle Password Visibility -->
    <div class="options-wrapper">
      <label class="toggle-switch">
        <input type="checkbox" (click)="togglePassword()">
        <span class="slider"></span>
      </label>
      <span>Show Password</span>
    </div>

    <!-- Gender Selection -->
    <div class="radio-group-wrapper">
      <label class="radio-group-label">Gender</label>
      <div class="radio-group">
        <label class="radio-option"
          [class.is-invalid]="f['gender'].invalid && (f['gender'].dirty || f['gender'].touched)">
          <input type="radio" [value]="0" formControlName="gender"><span>Male</span>
        </label>
        <label class="radio-option"
          [class.is-invalid]="f['gender'].invalid && (f['gender'].dirty || f['gender'].touched)">
          <input type="radio" [value]="1" formControlName="gender"><span>Female</span>
        </label>
      </div>
      <div *ngIf="f['gender'].invalid && (f['gender'].dirty || f['gender'].touched)" class="input-hint">
        <div *ngIf="f['gender'].errors?.['required']">Gender is required.</div>
      </div>
    </div>

    <!-- Role Selection -->
    <div class="radio-group-wrapper">
      <label class="radio-group-label">I am a</label>
      <div class="radio-group role-group">
        <label class="radio-option"
          [class.is-invalid]="f['role'].invalid && (f['role'].dirty || f['role'].touched)">
          <input type="radio" [value]="0" formControlName="role"><span>Student</span>
        </label>
        <label class="radio-option"
          [class.is-invalid]="f['role'].invalid && (f['role'].dirty || f['role'].touched)">
          <input type="radio" [value]="1" formControlName="role"><span>Doctor</span>
        </label>
        <label class="radio-option"
          [class.is-invalid]="f['role'].invalid && (f['role'].dirty || f['role'].touched)">
          <input type="radio" [value]="2" formControlName="role"><span>Admin</span>
        </label>
      </div>
      <div *ngIf="f['role'].invalid && (f['role'].dirty || f['role'].touched)" class="input-hint">
        <div *ngIf="f['role'].errors?.['required']">Role is required.</div>
      </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn-submit-glow" [disabled]="signupForm.invalid || isSubmitting">
      <span *ngIf="!isSubmitting">Create Account</span>
      <span *ngIf="isSubmitting">Creating Account...</span>
    </button>

    <div class="form-footer">
      <p>Already have an account? <a routerLink="/auth/login">Log In</a></p>
    </div>
  </form>
</div>

<!-- Animated Background Elements -->
<div class="aurora-background"></div>
<div class="animated-grid-background"></div>
