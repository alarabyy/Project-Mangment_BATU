<div class="profile-page-wrapper">

  <!-- Loading State -->
  <div *ngIf="isLoading" class="status-container">
    <div class="loader"></div>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="status-container error-container">
    <div class="icon-wrapper">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
      </svg>
    </div>
    <h2>An Error Occurred</h2>
    <p>{{ errorMessage }}</p>
  </div>

  <!-- Profile Content (Split Layout) -->
  <div *ngIf="userProfile && !isLoading && !errorMessage" class="profile-layout-grid animate-fade-in">

    <!-- Left Sidebar -->
    <aside class="profile-sidebar">
      <div class="sidebar-content">
        <div class="avatar-container">
          <div class="avatar-image">
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd" />
             </svg>
          </div>
          <div class="online-indicator"></div>
        </div>
        <h1 class="user-name">{{ userProfile.firstName }} {{ userProfile.lastName }}</h1>
        <p class="user-role">{{ getRoleAsString(userProfile.role) }}</p>
        <button class="logout-btn-sidebar" (click)="logout()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10.75 4.75a.75.75 0 000 1.5h2.5a.75.75 0 000-1.5h-2.5zM10 6a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5A.75.75 0 0110 6zM8.25 6.75a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5zM12 1.5A10.5 10.5 0 1022.5 12 10.512 10.512 0 0012 1.5zm0 19.5a9 9 0 119-9 9.01 9.01 0 01-9 9z" /></svg>
          Logout
        </button>
      </div>
    </aside>

    <!-- Right Main Content -->
    <main class="profile-main-content">
      <section class="info-card">
        <h2 class="card-title">User Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Email Address</label>
            <span>{{ userProfile.email }}</span>
          </div>
          <div class="info-item">
            <label>User ID</label>
            <span>{{ userProfile.id }}</span>
          </div>
          <div class="info-item">
            <label>Account Status</label>
            <span class="status-active">Active</span>
          </div>
          <div class="info-item">
            <label>Member Since</label>
            <span>January 2024</span> <!-- Note: This is hardcoded, consider making it dynamic -->
          </div>
        </div>
      </section>

      <section class="info-card">
        <h2 class="card-title">Actions</h2>
        <div class="actions-grid">
           <button class="action-btn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32l8.4-8.4z" /></svg>
              <span>Edit Profile</span>
           </button>
           <button class="action-btn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z" clip-rule="evenodd" /></svg>
              <span>Change Password</span>
           </button>
        </div>
      </section>
    </main>

  </div>
</div>
